
## 5장 제어장치
 
###  하드와이어 장치
- 논리회로 만들어진 하드웨어로 명령어 실행제어에 필요한 신호발생
- 회로구조를 물리적을 변경하지 않고는 신호 생성방법을 수정할 수 없음
- 제어 하드웨어는 상태기계처럼 클록 사이클이 진행됨에 따라 상태가 변함
###  마이크로 프루그램 제어장치
- 제어 메모리가 존재
- 제어 신호를 비트 패턴으로 만들어 제어 메모리에 저장(명령어가 인출될떄 하드와이어처럼 일정한 신호는 생김)
- 마이크로 명령 발생장치 : 마이크로 명령 시작 주소 생성
- 설계할떄 유사한 의미를 가지는 명령끼리 그룹화한 필드를 구성한다.

### 마이크로 프로그램 제저 장치의 종류
#### 수평적 마이크로 프로그램
- 제어 신호가 제어 신호당 1비트로 해독된 2진 형식으로 표현
- 수평적 마이크로 프로그램의 특징
  - 제어워드가 길고 
  - 더 높은 수준의 병렬처리가 가능핟.
  - 추가 하드웨어가 필요하지 않음

#### 수직적 마이크로 프로그램
- 제어 신호가 인코딩된 2진 형식으로 표현
- log<sub>2</sub>n개의 비트가 필요하다
- 특징
  - 제어워드가 짧다
  - 유연하다 
  - 낮은 수준의 병령처리
  - 추가하드웨어필요   

### 명령어 사이클
#### 사이클(데이터 경로)
- 인출-해독-명령어 실행 
- 인터럽트 사이클 :명령어 후 인터럽트 유무를 판별하고 있으면 인터럽트 루틴 실행

#### 명령어 인출
- t1: PC -> MAR -> 주소버스 <br>
- t2: M[MAR] -> 데이터버스-> MBR <br>
- t3: MBR -> 명령레지스터(IR)

#### 명령어 해독 사이클
- IR -> 디코더 -> CU

#### 명령어 싱행 사이클
- IR : operand èMAR -> 주소버스
- M[MAR] -> MBR ->데이터버스-
- MBR -> R1

### 파이프 라이닝
한사이클 명령어 실행하는데 Ts가 걸리다 할때  n개의 명령어를 실행하면<br>
nTs시간이 소모된다 
하지만 파이프 라이닝을 쓰면 Ts시간이 걸림
#### 데이터 해저드
- 데이터의존성(data dependency) : 파이프라인에서 앞서가는 명령의 ALU 연산결과를 레지스터에 기록하기 전에 다른명령에 이데이터가 필요한상황
- 앞의 명령 결과가 다음 명령 입력으로 사용 될 때 파이프라인시스템에서 문제발생
- 버블(NOP)을 명령 사이에 끼워 넣어 프로그램 실행을 1 단계 또는2 단계 지연

#### 제어 해저드
- 파이프라인CPU 구조의분기명령이실행될때발생
- 제어해저드해결방법
  - 지연슬롯(delay slot)을 넣고 분기 목적지 주소를 계산하는 과정을 파이프라인 속에 넣는것
  - 분기예측 알고리즘을 이용하기도 함
 
#### 구조적 해저드
- 서로다른단계에서동시에실행되는명령이컴퓨터내의장치하나를동시에사용하려고할때발생
- 인출과정에서메모리충돌을해결방법
  - 하버드구조(harvardarchitecture)를사용
  - 분리캐시를사용하여충돌회피 
#### 슈퍼스칼라
- 하나의프로세서안에2개이상의파이프라인탑재
