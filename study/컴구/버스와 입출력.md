### cpu 칩
- CPU 핀은주소, 데이터, 제어세가지유형으로나눌수있다.
- 핀을유형별로묶어버스라고하며, 메모리와입출력장치에서해당되는각핀에연결된다.

#### 버스의 크기
- 주소핀의수(주소버스크기)
- 데이터핀의수(데이터버스크기)

#### 인터럽트 핀
- 대부분의컴퓨터에서CPU는I/O장치에작업을지시하고, I/O장치가작업을수행하는동안CPU는다른작업수행
- I/O가완료되면I/O제어기는CPU에인터럽트신호를보내I/O장치를처리

#### 버스 중재핀
- 장치2개가동시에버스를사용하지못하도록버스에서트래픽을조절

### 시스템 버스
- 여러장치사이를연결하는통로 
- 버스종류: 주소버스, 데이터버스, 제어버스

#### 일반적인 버스 구조
- 비트수:/사선으로선위에표시
#### 버스 프로토콜
- 다른사람이설계한보드를연결할때외부버스가어떻게작동되는지정의
- 타사에서제작된보드를인터페이스슬롯연결

#### 버스 폭
- 주소버스크기가m이면메모리위치(주소)를2<sup>m</sup>개지정

#### 버스 대역폭 확장
- 버스스큐(bus skew) 발생: (PCB패턴상길이가달라서)동시에출발한신호가목적지에도달하는시간이서로다름, 즉, 두신호의판독값사이에미세한차이발생
- 문제 해결
  - 다중화(multiplexing)버스를사용:주소선과데이터선공유
  - 버스트 모드 사용: 일련의데이터를연속적인메모리주소로전송
#### 제어버스
- 단방향또는양방향
- 데이터및주소버스에대한액세스와사용제어

#### 버스타이밍(Bustiming)
- 동기식버스(Synchronousbus)
  - T1: 주소버스에메모리주소를배치, 다양한상태선지정-주소버스가안정화되면주소활성화신호발행
  - T2: 읽기동작의경우프로세서는두번째사이클이시작될때읽기명령
  - T3: 메모리모듈은주소를인식하고한주기지연후데이터버스에데이터탑재 
- 비동기식버스(Asynchronousbus
### 버스중재
- 버스충돌 : 2개이상의장치가동시에버스를사용하기원할때발생
- 버스 중재 : 버스중재:장치하나가다른장치로데이터를보내고자할때➊버스중재기에서버스의사용승인을받고➋버스를통해데이터를전송

#### 병렬버스중재방식
- 우선순위 디코더
- 라운드 로빈방식

#### 직렬버스중재방식
- 중재기에연결된순서에따라우선순서결정

#### 플링 버스 중재 방식
- 중재기가순서대로연결된버스마스터의주소를발생하여각마스터에버스를사용할지확인

### 인터럽트I/O
- 여러장치가동시에인터럽트를발생시킬수있으므로버스와같은중재문제발생
- 장치에우선순위를지정하고중앙집중식인터럽트제어기가중요한장치순서에따라우선순위를부여

#### PCI 버스
- PCI가64비트주소와64비트데이터를지원: 주소와데이터신호교대(멀티플렉스)로지원
- 장점
  - 쓰기동작의경우 : 마스터가주소와데이터를모두입력하기때문에버스를교대로쓸필요없음
  - 버스 요구: CPU를포함한모든PCI 장치는REQ#를입력하고중재기가GNT#선에응답할때까지대기
- 단점
   -  I/O 대역폭이더커지면일시적으로내부PC 구조를매우복잡하게만듦
   -  버스스큐(bus skew), 전선간간섭(crosstalk), 커패시턴스효과(capacitance effects) 등이점점악화되기때문에버스의클록주파수를높이는것은좋은해결책이아님
- 해결책
  - PCI Express 솔루션(PCIe)의핵심: 많은마스터와슬레이브로병렬버스를제거하고고속포인트-투-포인트직렬연결을기반으로한설계
    - 패킷에오류감지코드사용: PCI 버스보다높은수준의신뢰성제공
    - 핫플러그가능: 즉,장치가실행중일때시스템에추가되거나제거될수있음         
### USB
- 동시성(Isochronous)프레임: 정확한시간간격으로데이터를보내거나받아야하는마이크, 마우스, 스피커, 전화기등실시간장치용-이들은예측가능한지연을가지고있지만오류가발생해도재전송을하지않음
- 벌크(Bulk)프레임: 프린터처럼실시간요구사항이없는장치에대량의데이터를전송할때사용(재전송가능)
- 인터럽트(Interrupt)프레임: USB가인터럽트를지원하지않기때문에필요함, 예를들어키를누를때마다키보드가인터럽트를일으키는대신, 운영체제는보류중인키입력을수집하기위해50ms마다폴링

### 인터페이스
#### 인터페이스 장치의 중요성
- 주목적은CPU와각주변장치사이에존재하는차이해결
  - 동기화방법필요
  - 형식변환필요
#### 프로그램 입출력
- 메모리사상입출력(Memory Mapper I/O) : 입출력장치와메모리에데이터와주소는공통버스를갖지만제어주소는별도로가진다(직접 엑서스 불가)
#### 분리된 입출력
- 입출력장치와메모리가데이터버스와주소버스는공통으로사용
- 입출력을위한별도의읽기및쓰기제어선있음
- 메모리주소와입출력의주소공간분리: 입출력포트
  - 메모리사상입출력(Memory mapped I/O
    - 모든버스가공통으로사용
    -  동일한명령어세트가메모리및입출력에동

#### 인터럽트 I/O
- 인터럽트기능및특수명령사용: 인터페이스에모든장치에서데이터를사용할필요가있을때마다인터럽트요청신호전송–그동안CPU는다른프로그램실행

### DMA
- 주변장치가메모리버스를사용하여직접통신하도록허용하여CPU가개입하지않고데이터전송
- DMA제어기:I/O 장치와메모리장치간에직접전송을관리하려고버스인계받음
  - 종류
    - 블록전송(burst transfer, block transfer) : 데이터전송이완전히끝난후버스반환  
    - 사이클스틸(cyclic steal)
      - DMA제어기는한번에한단어씩전송하고버스제어권을CPU에반환
      - CPU는DMA I/O 전송이메모리사이클하나를‘훔칠’수있도록한메모리사이클동안작업지연
    - 인터리브모드(interleaved mod
      - 마이크로프로세서는명령또는ALU 연산디코딩과같은내부연산을수행할때버스를사용하지않기때문에이때DMA작동
      - 이크로프로세서를중지하지않고데이터전송

클록킹: 클록유무다. 동기식은클록을사용하여고속의데이터전송이가능하나클록스큐를최소화해야한다. 비동기식은클록을사용하지않으므로, 클록스큐가없고, 속도가다른장치들을연결할수있다. 핸드셰이킹프로토콜이필요하므로속도가느리다 



